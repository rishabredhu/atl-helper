<!-- app/templates/base.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aotearoa Tours {% if title %}- {{ title }}{% endif %}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header and Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="{{ url_for('main.home') }}"
          >Aotearoa Tours</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('main.home') }}">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('main.tours') }}">Tours</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="{{ url_for('customers.customer_search') }}"
                >Search Customers</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('customers.customer_add') }}"
                >Add Customer</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('bookings.booking_add') }}"
                >Add Booking</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-4">
      {% with messages = get_flashed_messages() %} {% if messages %} {% for
      message in messages %}
      <div class="alert alert-info">{{ message }}</div>
      {% endfor %} {% endif %} {% endwith %} {% block content %}{% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>

<!-- app/templates/home.html -->
{% extends "base.html" %} {% block content %}
<div class="row">
  <div class="col-md-6">
    <img
      src="{{ url_for('static', filename='images/nz-landscape.jpg') }}"
      class="img-fluid rounded"
      alt="New Zealand Landscape"
    />
  </div>
  <div class="col-md-6">
    <h1>Welcome to Aotearoa Tours</h1>
    <p class="lead">
      Experience the beauty and culture of New Zealand with our carefully
      curated tours. From stunning landscapes to rich cultural experiences, we
      offer unforgettable journeys across Aotearoa.
    </p>
  </div>
</div>
{% endblock %}

<!-- app/templates/tourlist.html -->
{% extends "base.html" %} {% block content %}
<div class="card">
  <div class="card-header">
    <h2>{{ tourgroup.tourname }}</h2>
    <h4>Start Date: {{ tourgroup.startdate.strftime('%d %B %Y') }}</h4>
  </div>
  <div class="card-body">
    <div class="list-group">
      {% for customer in customers %}
      <a
        href="{{ url_for('customers.customer_booking_overview', customer_id=customer.customerid) }}"
        class="list-group-item list-group-item-action"
      >
        {{ customer.familyname }}, {{ customer.firstname }}
        <small class="text-muted"
          >(DOB: {{ customer.dob.strftime('%d/%m/%Y') }})</small
        >
      </a>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}

<!-- app/templates/booking_add.html -->
{% extends "base.html" %} {% block content %}
<div class="card">
  <div class="card-header">
    <h2>Add New Booking</h2>
  </div>
  <div class="card-body">
    <form method="POST">
      <div class="mb-3">
        <label for="customer_id" class="form-label">Customer</label>
        <select
          class="form-select"
          id="customer_id"
          name="customer_id"
          required
        >
          <option value="">Select Customer</option>
          {% for customer in customers %}
          <option value="{{ customer.customerid }}">
            {{ customer.familyname }}, {{ customer.firstname }}
          </option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label for="tour_id" class="form-label">Tour</label>
        <select class="form-select" id="tour_id" name="tour_id" required>
          <option value="">Select Tour</option>
          {% for tour in tours %}
          <option value="{{ tour.tourid }}">
            {{ tour.tourname }} (Age: {{ tour.agerestriction }}+)
          </option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label for="start_date" class="form-label">Start Date</label>
        <input
          type="date"
          class="form-control"
          id="start_date"
          name="start_date"
          min="{{ today }}"
          required
        />
      </div>

      <button type="submit" class="btn btn-primary">Add Booking</button>
    </form>
  </div>
</div>
{% endblock %}

<!-- app/templates/customer_overview.html -->
{% extends "base.html" %} {% block content %}
<div class="card mb-4">
  <div class="card-header">
    <h2>{{ customer.firstname }} {{ customer.familyname }}</h2>
    <p class="lead">Total Destinations Booked: {{ total_destinations }}</p>
  </div>
  <div class="card-body">
    <h3>Bookings</h3>

    {% if bookings %}
    <h4>Future Bookings</h4>
    <div class="list-group mb-4">
      {% for booking in bookings if booking.status == 'future' %}
      <div class="list-group-item">
        <h5>{{ booking.tourname }}</h5>
        <p>
          Departure: {{ booking.formatted_date }}<br />
          Destinations: {{ booking.destination_count }}
        </p>
      </div>
      {% endfor %}
    </div>

    <h4>Current Bookings</h4>
    <div class="list-group mb-4">
      {% for booking in bookings if booking.status == 'current' %}
      <div class="list-group-item">
        <h5>{{ booking.tourname }}</h5>
        <p>
          Departure: {{ booking.formatted_date }}<br />
          Destinations: {{ booking.destination_count }}
        </p>
      </div>
      {% endfor %}
    </div>

    <h4>Past Bookings</h4>
    <div class="list-group">
      {% for booking in bookings if booking.status == 'past' %}
      <div class="list-group-item">
        <h5>{{ booking.tourname }}</h5>
        <p>
          Departure: {{ booking.formatted_date }}<br />
          Destinations: {{ booking.destination_count }}
        </p>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p>No bookings found.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
